#input_encoded="ewogICAgInNlcnZlcl91cmwiOiAiaHR0cHM6Ly9iZXRhY29uc29sZS5jbG91ZGVyaXplci5jb20iLAogICAgInByb2plY3QiOiB7ImlkIjoiYzFjMzY4NjQtOTc0OS00MmVlLWIzNDYtZDUzZDk1OGEyZmIyIiwgImNvbXBhbnkiOiAiMjM3MWQwMTgtODMzNS00ODk3LTliMjYtNGQyOTVlZDVmYzcwIiwgInNlcnZpbmdwcm9qZWN0IjogImUxMDJhYTI0LWI0N2EtNGQwOC05NWRjLTM3YWY1MWYwMjlhYSJ9LAogICAgInF1ZXJ5X2ludm9jYXRpb25fY291bnQiOiAiY2VpbChzdW0oaW5jcmVhc2UoZ2F0ZXdheV9mdW5jdGlvbl9pbnZvY2F0aW9uX3RvdGFsJTdCZnVuY3Rpb25fbmFtZSUzRCUyMmNsb3VkeS1sYWxhbGFuZC5vcGVuZmFhcy1mbiUyMiU3RCU1QjY5MTIwMHMlNUQpKSkiLAogICAgInF1ZXJ5X3RpbWVfc3VtX3N0YW5kYXJkIjogImNlaWwoc3VtKGluY3JlYXNlKGdhdGV3YXlfZnVuY3Rpb25zX3NlY29uZHNfc3VtJTdCZnVuY3Rpb25fbmFtZSUzRCUyMmNsb3VkeS1sYWxhbGFuZC5vcGVuZmFhcy1mbiUyMiUyQ2luZnJhX3R5cGUlM0QlMjJzdGFuZGFyZCUyMiU3RCU1QjY5MTIwMHMlNUQpKSkiLAogICAgInF1ZXJ5X3RpbWVfc3VtX2hpZ2htZW1vcnkiOiAiY2VpbChzdW0oaW5jcmVhc2UoZ2F0ZXdheV9mdW5jdGlvbnNfc2Vjb25kc19zdW0lN0JmdW5jdGlvbl9uYW1lJTNEJTIyY2xvdWR5LWxhbGFsYW5kLm9wZW5mYWFzLWZuJTIyJTJDaW5mcmFfdHlwZSUzRCUyMmhpZ2htZW1vcnklMjIlN0QlNUI2OTEyMDBzJTVEKSkpIiwKICAgICJxdWVyeV90aW1lX3N1bV9ncHUiOiAiY2VpbChzdW0oaW5jcmVhc2UoZ2F0ZXdheV9mdW5jdGlvbnNfc2Vjb25kc19zdW0lN0JmdW5jdGlvbl9uYW1lJTNEJTIyY2xvdWR5LWxhbGFsYW5kLm9wZW5mYWFzLWZuJTIyJTJDaW5mcmFfdHlwZSUzRCUyMmdwdSUyMiU3RCU1QjY5MTIwMHMlNUQpKSkiLAogICAgImN1c3RfcXVlcnlfaW52b2NhdGlvbl9jb3VudCI6ImNlaWwoc3VtKGluY3JlYXNlKGdhdGV3YXlfZnVuY3Rpb25faW52b2NhdGlvbl90b3RhbCU3QmZ1bmN0aW9uX25hbWUlM0R+JTIyY2xvdWR5Lioub3BlbmZhYXMtZm4lMjIlN0QlNUI2OTEyMDBzJTVEKSkpIiwKICAgICJjdXN0X3F1ZXJ5X3RpbWVfc3VtX3N0YW5kYXJkIjoiY2VpbChzdW0oaW5jcmVhc2UoZ2F0ZXdheV9mdW5jdGlvbnNfc2Vjb25kc19zdW0lN0JmdW5jdGlvbl9uYW1lJTNEfiUyMmNsb3VkeS4qLm9wZW5mYWFzLWZuJTIyJTJDaW5mcmFfdHlwZSUzRCUyMnN0YW5kYXJkJTIyJTdEJTVCNjkxMjAwcyU1RCkpKSIsCiAgICAiY3VzdF9xdWVyeV90aW1lX3N1bV9oaWdobWVtb3J5IjoiY2VpbChzdW0oaW5jcmVhc2UoZ2F0ZXdheV9mdW5jdGlvbnNfc2Vjb25kc19zdW0lN0JmdW5jdGlvbl9uYW1lJTNEfiUyMmNsb3VkeS4qLm9wZW5mYWFzLWZuJTIyJTJDaW5mcmFfdHlwZSUzRCUyMmhpZ2htZW1vcnklMjIlN0QlNUI2OTEyMDBzJTVEKSkpIiwKICAgICJjdXN0X3F1ZXJ5X3RpbWVfc3VtX2dwdSI6ImNlaWwoc3VtKGluY3JlYXNlKGdhdGV3YXlfZnVuY3Rpb25zX3NlY29uZHNfc3VtJTdCZnVuY3Rpb25fbmFtZSUzRH4lMjJjbG91ZHkuKi5vcGVuZmFhcy1mbiUyMiUyQ2luZnJhX3R5cGUlM0QlMjJncHUlMjIlN0QlNUI2OTEyMDBzJTVEKSkpIgp9"
input_encoded="ewogICAgInNlcnZlcl91cmwiOiAiaHR0cHM6Ly9iZXRhY29uc29sZS5jbG91ZGVyaXplci5jb20iLAogICAgInBlcmlvZCI6ICIxNjI5MTEiLAogICAgIm1vbnRoX2ZpcnN0IjogIjE2MTIxMTc4MDAiLAogICAgImNvbXBhbnluYW1lIjogImNsb3VkeSIsCiAgICAicHJvamVjdCI6IHsiaWQiOiJjMWMzNjg2NC05NzQ5LTQyZWUtYjM0Ni1kNTNkOTU4YTJmYjIiLCAiY29tcGFueSI6ICIyMzcxZDAxOC04MzM1LTQ4OTctOWIyNi00ZDI5NWVkNWZjNzAiLCAic2VydmluZ3Byb2plY3QiOiAiZTEwMmFhMjQtYjQ3YS00ZDA4LTk1ZGMtMzdhZjUxZjAyOWFhIiwgIm5hbWUiOiJjbG91ZHktbGFsYWxhbmQifSwKICAgICJxdWVyeV9pbnZvY2F0aW9uX2NvdW50IjogImNlaWwoc3VtKGluY3JlYXNlKGdhdGV3YXlfZnVuY3Rpb25faW52b2NhdGlvbl90b3RhbCU3QmZ1bmN0aW9uX25hbWUlM0QlMjJjbG91ZHktbGFsYWxhbmQub3BlbmZhYXMtZm4lMjIlN0QlNUI2OTEyMDBzJTVEKSkpIiwKICAgICJxdWVyeV90aW1lX3N1bSI6ICJjZWlsKGluY3JlYXNlKGdhdGV3YXlfZnVuY3Rpb25zX3NlY29uZHNfc3VtJTdCZnVuY3Rpb25fbmFtZSUzRCUyMmNsb3VkeS1sYWxhbGFuZC5vcGVuZmFhcy1mbiUyMiU3RCU1QjY5MTIwMHMlNUQpKSIsCiAgICAiY3VzdF9xdWVyeV9pbnZvY2F0aW9uX2NvdW50IjoiY2VpbChzdW0oaW5jcmVhc2UoZ2F0ZXdheV9mdW5jdGlvbl9pbnZvY2F0aW9uX3RvdGFsJTdCZnVuY3Rpb25fbmFtZSUzRH4lMjJjbG91ZHkuKi5vcGVuZmFhcy1mbiUyMiU3RCU1QjY5MTIwMHMlNUQpKSkiLAogICAgImN1c3RfcXVlcnlfdGltZV9zdW0iOiJjZWlsKGluY3JlYXNlKGdhdGV3YXlfZnVuY3Rpb25zX3NlY29uZHNfc3VtJTdCZnVuY3Rpb25fbmFtZSUzRH4lMjJjbG91ZHkuKi5vcGVuZmFhcy1mbiUyMiU3RCU1QjY5MTIwMHMlNUQpKSIKfQ=="
# input={
#     "server_url": "https://betaconsole.clouderizer.com",
#     "project": {"id":"c1c36864-9749-42ee-b346-d53d958a2fb2", "company": "2371d018-8335-4897-9b26-4d295ed5fc70", "servingproject": "e102aa24-b47a-4d08-95dc-37af51f029aa"},
#     "query_invocation_count": "ceil(sum(increase(gateway_function_invocation_total%7Bfunction_name%3D%22cloudy-lalaland.openfaas-fn%22%7D%5B691200s%5D)))",
#     "query_time_sum_standard": "ceil(sum(increase(gateway_functions_seconds_sum%7Bfunction_name%3D%22cloudy-lalaland.openfaas-fn%22%2Cinfra_type%3D%22standard%22%7D%5B691200s%5D)))",
#     "query_time_sum_highmemory": "ceil(sum(increase(gateway_functions_seconds_sum%7Bfunction_name%3D%22cloudy-lalaland.openfaas-fn%22%2Cinfra_type%3D%22highmemory%22%7D%5B691200s%5D)))",
#     "query_time_sum_gpu": "ceil(sum(increase(gateway_functions_seconds_sum%7Bfunction_name%3D%22cloudy-lalaland.openfaas-fn%22%2Cinfra_type%3D%22gpu%22%7D%5B691200s%5D)))",
#     "cust_query_invocation_count":"ceil(sum(increase(gateway_function_invocation_total%7Bfunction_name%3D~%22cloudy.*.openfaas-fn%22%7D%5B691200s%5D)))",
#     "cust_query_time_sum_standard":"ceil(sum(increase(gateway_functions_seconds_sum%7Bfunction_name%3D~%22cloudy.*.openfaas-fn%22%2Cinfra_type%3D%22standard%22%7D%5B691200s%5D)))",
#     "cust_query_time_sum_highmemory":"ceil(sum(increase(gateway_functions_seconds_sum%7Bfunction_name%3D~%22cloudy.*.openfaas-fn%22%2Cinfra_type%3D%22highmemory%22%7D%5B691200s%5D)))",
#     "cust_query_time_sum_gpu":"ceil(sum(increase(gateway_functions_seconds_sum%7Bfunction_name%3D~%22cloudy.*.openfaas-fn%22%2Cinfra_type%3D%22gpu%22%7D%5B691200s%5D)))"
# }
# input1={
#     "server_url": "https://betaconsole.clouderizer.com",
#     "period": "162911",
#     "month_first": "1612117800",
#     "companyname": "cloudy",
#     "project": {"id":"c1c36864-9749-42ee-b346-d53d958a2fb2", "company": "2371d018-8335-4897-9b26-4d295ed5fc70", "servingproject": "e102aa24-b47a-4d08-95dc-37af51f029aa", "name":"cloudy-lalaland"},
#     "query_invocation_count": "ceil(sum(increase(gateway_function_invocation_total%7Bfunction_name%3D%22cloudy-lalaland.openfaas-fn%22%7D%5B691200s%5D)))",
#     "query_time_sum": "ceil(increase(gateway_functions_seconds_sum%7Bfunction_name%3D%22cloudy-lalaland.openfaas-fn%22%7D%5B691200s%5D))",
#     "cust_query_invocation_count":"ceil(sum(increase(gateway_function_invocation_total%7Bfunction_name%3D~%22cloudy.*.openfaas-fn%22%7D%5B691200s%5D)))",
#     "cust_query_time_sum":"ceil(increase(gateway_functions_seconds_sum%7Bfunction_name%3D~%22cloudy.*.openfaas-fn%22%7D%5B691200s%5D))"
# }

bash prometheus.sh $input_encoded